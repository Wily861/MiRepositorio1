# ğŸ“ database-scripts

Este repositorio contiene una **colecciÃ³n organizada de scripts SQL** desarrollados a lo largo de mi trayectoria como profesional en el mundo de bases de datos. EstÃ¡n orientados a cubrir tareas comunes de administraciÃ³n, mantenimiento, control de acceso y automatizaciÃ³n de operaciones rutinarias sobre entornos Oracle y otros motores SQL.

A lo largo de mi experiencia he trabajado en soluciones para clientes de alto impacto como:

- ğŸ¬ **Alkosto**
- ğŸ¥ **Cardio Infantil**, **EMI**, **HPTU (Hospital Pablo TobÃ³n Uribe)**
- ğŸ›ï¸ **FiduPopular (Banco Popular)**
- ğŸ¢ **Metro de MedellÃ­n**, **Ceipa**, **Flamingo**
- ğŸ›ï¸ **Novaventa**, **La Riviera**
- ğŸ›¡ï¸ **ProtecciÃ³n**
- ğŸ“¦ **Zona Franca**

Estos scripts han sido de uso frecuente en actividades reales de soporte, implementaciÃ³n y auditorÃ­a en esos entornos corporativos.

---

## ğŸ“‚ Contenido del Repositorio

- ğŸ” Scripts de gestiÃ³n de permisos (`GRANT`, `REVOKE`)
- ğŸ—ƒï¸ Consultas administrativas (uso de catÃ¡logos, metadatos)
- ğŸ› ï¸ Mantenimiento de esquemas y usuarios
- ğŸ§© Scripts compatibles con bases de datos Oracle (ajustables a otros motores)

---

## ğŸ“ Ejemplo de Script

### ğŸ¯ Otorgar permisos al usuario `SERV_APP` sobre objetos del esquema `PRDN`

```sql
/* 
------------------------------------------------------------------------------------------
-- Script: grant_permissions_to_serv_app.sql
-- Autor: Wily Duvan Villamil Rey
-- Fecha: 10/06/2025
--
-- DescripciÃ³n:
-- Genera dinÃ¡micamente sentencias GRANT para otorgar permisos al usuario "SERV_APP" 
-- sobre objetos del esquema PRDN.
-- - SELECT sobre todas las tablas y vistas.
-- - EXECUTE sobre todos los procedimientos almacenados.
------------------------------------------------------------------------------------------
*/

-- Permisos SELECT sobre tablas y vistas
SELECT 'GRANT SELECT ON ' || owner || '.' || object_name || ' TO "SERV_APP";' AS grant_statement
  FROM dba_objects
 WHERE owner = 'PRDN'
   AND object_type IN ('TABLE', 'VIEW')

UNION

-- Permisos EXECUTE sobre procedimientos almacenados
SELECT 'GRANT EXECUTE ON ' || owner || '.' || object_name || ' TO "SERV_APP";' AS grant_statement
  FROM dba_objects
 WHERE owner = 'PRDN'
   AND object_type = 'PROCEDURE';

--

/*
-------------------------------------------------------------------------------------
-- Script: user_setup_and_permissions.sql
-- Autor: Wily Duvan Villamil Rey
-- Fecha: 10/06/2025
--
-- DescripciÃ³n:
-- Este script crea un usuario, otorga permisos especÃ­ficos en una base de datos 
-- y elimina una funciÃ³n existente si ya no se requiere. DiseÃ±ado para entornos 
-- PostgreSQL (ajustar segÃºn el motor si es necesario).
-------------------------------------------------------------------------------------
*/

-- âŠ Crear el usuario Leadpasivos con una contraseÃ±a segura
CREATE USER leadpasivos WITH PASSWORD 'h8A2WuDS';

-- â‹ Conceder permisos de conexiÃ³n a la base de datos dbOzono al usuario usrDivisasRead
GRANT CONNECT ON DATABASE "dbOzono" TO "usrDivisasRead";

-- âŒ Otorgar uso del esquema flujodivisasgiros al usuario usrDivisasRead
GRANT USAGE ON SCHEMA flujodivisasgiros TO "usrDivisasRead";

-- â Otorgar permisos de lectura (SELECT) sobre todas las tablas del esquema flujodivisasgiros
GRANT SELECT ON ALL TABLES IN SCHEMA flujodivisasgiros TO "usrDivisasRead";

-- â Eliminar la funciÃ³n registrotipo1 del esquema flujos_cdt, si ya no es necesaria
DROP FUNCTION flujos_cdt.registrotipo1(varchar);








