# üìÅ database-scripts

Este repositorio contiene una **colecci√≥n organizada de scripts SQL** desarrollados a lo largo de mi trayectoria como profesional en el mundo de bases de datos. Est√°n orientados a cubrir tareas comunes de administraci√≥n, mantenimiento, control de acceso y automatizaci√≥n de operaciones rutinarias sobre entornos Oracle y otros motores SQL.

A lo largo de mi experiencia he trabajado en soluciones para clientes de alto impacto como:

- üè¨ **Alkosto**
- üè• **Cardio Infantil**, **EMI**, **HPTU (Hospital Pablo Tob√≥n Uribe)**
- üèõÔ∏è **FiduPopular (Banco Popular)**
- üè¢ **Metro de Medell√≠n**, **Ceipa**, **Flamingo**
- üõçÔ∏è **Novaventa**, **La Riviera**
- üõ°Ô∏è **Protecci√≥n**
- üì¶ **Zona Franca**

Estos scripts han sido de uso frecuente en actividades reales de soporte, implementaci√≥n y auditor√≠a en esos entornos corporativos.

---

## üìÇ Contenido del Repositorio

- üîê Scripts de gesti√≥n de permisos (`GRANT`, `REVOKE`)
- üóÉÔ∏è Consultas administrativas (uso de cat√°logos, metadatos)
- üõ†Ô∏è Mantenimiento de esquemas y usuarios
- üß© Scripts compatibles con bases de datos Oracle (ajustables a otros motores)

---

## üìù Ejemplo de Script

### üéØ Otorgar permisos al usuario `SERV_APP` sobre objetos del esquema `PRDN`

```sql
/* 
------------------------------------------------------------------------------------------
-- Script: grant_permissions_to_serv_app.sql
-- Autor: Wily Duvan Villamil Rey
-- Fecha: 10/06/2025
--
-- Descripci√≥n:
-- Genera din√°micamente sentencias GRANT para otorgar permisos al usuario "SERV_APP" 
-- sobre objetos del esquema PRDN.
-- - SELECT sobre todas las tablas y vistas.
-- - EXECUTE sobre todos los procedimientos almacenados.
------------------------------------------------------------------------------------------
*/

-- Permisos SELECT sobre tablas y vistas
SELECT 'GRANT SELECT ON ' || owner || '.' || object_name || ' TO "SERV_APP";' AS grant_statement
  FROM dba_objects
 WHERE owner = 'PRDN'
   AND object_type IN ('TABLE', 'VIEW')

UNION

-- Permisos EXECUTE sobre procedimientos almacenados
SELECT 'GRANT EXECUTE ON ' || owner || '.' || object_name || ' TO "SERV_APP";' AS grant_statement
  FROM dba_objects
 WHERE owner = 'PRDN'
   AND object_type = 'PROCEDURE';


--

/*
-------------------------------------------------------------------------------------
-- Script: user_setup_and_permissions.sql
-- Autor: Wily Duvan Villamil Rey
-- Fecha: 10/06/2025
--
-- Descripci√≥n:
-- Este script crea un usuario, otorga permisos espec√≠ficos en una base de datos 
-- y elimina una funci√≥n existente si ya no se requiere. Dise√±ado para entornos 
-- PostgreSQL (ajustar seg√∫n el motor si es necesario).
-------------------------------------------------------------------------------------
*/

-- 1. Crear el usuario Leadpasivos con una contrase√±a segura
CREATE USER leadpasivos WITH PASSWORD 'h8A2WuDS';

-- 2. Conceder permisos de conexi√≥n a la base de datos dbOzono al usuario usrDivisasRead
GRANT CONNECT ON DATABASE "dbOzono" TO "usrDivisasRead";

-- 3. Otorgar uso del esquema flujodivisasgiros al usuario usrDivisasRead
GRANT USAGE ON SCHEMA flujodivisasgiros TO "usrDivisasRead";

-- 4. Otorgar permisos de lectura (SELECT) sobre todas las tablas del esquema flujodivisasgiros
GRANT SELECT ON ALL TABLES IN SCHEMA flujodivisasgiros TO "usrDivisasRead";

-- 5. Eliminar la funci√≥n registrotipo1 del esquema flujos_cdt, si ya no es necesaria
DROP FUNCTION flujos_cdt.registrotipo1(varchar);






